Техническое задание на разработку веб-приложения "Магазин-склад обуви"
1. Введение
1.1. Назначение документа
Настоящий документ определяет технические требования к разработке веб-приложения для интернет-магазина обуви с функциями управления складом и различными уровнями доступа пользователей.

1.2. Цель проекта
Создание полнофункциональной платформы для онлайн-продажи обуви с системой управления товарами, пользователями и заказами.

1.3. Целевая аудитория
Покупатели обуви

Администраторы системы

Менеджеры магазина

2. Общее описание системы
2.1. Функциональные возможности
Каталог обуви с фильтрацией и поиском

Корзина покупок

Система заказов

Управление пользователями и ролями

Управление товарами и складскими остатками

Личный кабинет пользователя

2.2. Технологический стек
Frontend: HTML5, CSS3, JavaScript (Vanilla JS)

Backend: PHP 7.4+

База данных: MySQL 5.7+

Дополнительно: AJAX для динамических элементов

3. Требования к пользовательским ролям
3.1. Неавторизованный пользователь
Просмотр каталога товаров

Использование поиска и фильтров

Управление корзиной (добавление/удаление/изменение количества)

Просмотр детальной информации о товаре

Регистрация и авторизация

3.2. Авторизованный пользователь
Все возможности неавторизованного пользователя

Оформление заказов

Просмотр истории заказов

Редактирование личного профиля

Управление корзиной (добавление/удаление/изменение количества)

Сохранение корзины между сессиями

3.3. Менеджер
Все возможности авторизованного пользователя

Доступ к панели управления товарами

Добавление новых товаров

Редактирование существующих товаров

Обновление информации о наличии на складе

Просмотр заказов

3.4. Администратор
Все возможности менеджера

Управление пользователями (создание, редактирование, блокировка)

Назначение ролей пользователям

Полный доступ к системе

Просмотр статистики

4. Детальные требования
4.1. Система авторизации и регистрации
4.1.1. Регистрация пользователя
Поля: имя, email, телефон, пароль

Валидация email на уникальность

Подтверждение пароля

Хэширование паролей (bcrypt)

Автоматическая роль "пользователь"

4.1.2. Авторизация
Вход по email и паролю

Запоминание сессии

Восстановление пароля

Слияние корзин при авторизации

4.2. Каталог товаров
4.2.1. Структура товара
text
- ID товара
- Название
- Описание
- Категория (мужская/женская/детская обувь и т.д.)
- Бренд
- Цена
- Размеры (с количеством на складе)
- Цвета
- Материалы
- Изображения (минимум 3)
- Дата добавления
- Статус (активен/скрыт)
4.2.2. Функционал каталога
Пагинация (по 12 товаров на странице)

Фильтры:

По цене (диапазон)

По размеру

По категории

По бренду

По цвету

Сортировка:

По цене (возрастание/убывание)

По новизне

По популярности

Поиск по названию и описанию

4.3. Корзина покупок
4.3.1. Для неавторизованных пользователей
Хранение в localStorage/sessionStorage

Структура:

json
{
  "cart_id": "уникальный_идентификатор",
  "items": [
    {
      "product_id": 123,
      "size": 42,
      "quantity": 1
    }
  ]
}
4.3.2. Для авторизованных пользователей
Хранение в базе данных

Слияние с локальной корзиной при авторизации

Сохранение между сессиями

4.3.3. Операции с корзиной
Добавление товара с выбором размера

Изменение количества

Удаление товара

Расчет общей суммы

Очистка корзины

4.4. Система заказов
4.4.1. Оформление заказа (только для авторизованных)
Выбор способа доставки

Выбор способа оплаты

Ввод адреса доставки

Подтверждение заказа

Списание товаров со склада

4.4.2. Статусы заказа
Оформлен

Оплачен

В обработке

Отправлен

Доставлен

Отменен

4.5. Административная панель
4.5.1. Управление товарами (Администратор/Менеджер)
Добавление нового товара (форма с валидацией)

Редактирование существующих товаров

Загрузка изображений

Управление остатками по размерам

Изменение статуса товара

4.5.2. Управление пользователями (только Администратор)
Список всех пользователей

Фильтрация по ролям

Редактирование профилей

Назначение/изменение ролей

Блокировка/разблокировка

5. Нефункциональные требования
5.1. Производительность
Время загрузки страницы: не более 3 секунд

Оптимизация изображений

Кэширование статических ресурсов

5.2. Безопасность
Защита от SQL-инъекций

Валидация всех входящих данных

Защита от XSS-атак

HTTPS для передачи данных

Ограничение попыток авторизации

5.3. Совместимость
Поддержка современных браузеров (Chrome, Firefox, Safari, Edge)

Адаптивный дизайн (мобильные устройства, планшеты, десктоп)

Минимальное разрешение: 320px

6. Структура базы данных
6.1. Основные таблицы
sql
-- Пользователи
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    role ENUM('admin', 'manager', 'user') DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Товары
CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    category VARCHAR(100),
    brand VARCHAR(100),
    price DECIMAL(10, 2) NOT NULL,
    color VARCHAR(50),
    material VARCHAR(100),
    status ENUM('active', 'hidden') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Остатки по размерам
CREATE TABLE product_sizes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    product_id INT NOT NULL,
    size DECIMAL(4,1) NOT NULL,
    quantity INT DEFAULT 0,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- Изображения товаров
CREATE TABLE product_images (
    id INT PRIMARY KEY AUTO_INCREMENT,
    product_id INT NOT NULL,
    image_url VARCHAR(500) NOT NULL,
    is_main BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- Корзины пользователей
CREATE TABLE carts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    session_id VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- Элементы корзины
CREATE TABLE cart_items (
    id INT PRIMARY KEY AUTO_INCREMENT,
    cart_id INT NOT NULL,
    product_id INT NOT NULL,
    size_id INT NOT NULL,
    quantity INT NOT NULL,
    FOREIGN KEY (cart_id) REFERENCES carts(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id),
    FOREIGN KEY (size_id) REFERENCES product_sizes(id)
);

-- Заказы
CREATE TABLE orders (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    total_amount DECIMAL(10, 2) NOT NULL,
    status ENUM('created', 'paid', 'processing', 'shipped', 'delivered', 'cancelled') DEFAULT 'created',
    shipping_address TEXT,
    payment_method VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- Элементы заказа
CREATE TABLE order_items (
    id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    size_id INT NOT NULL,
    quantity INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id),
    FOREIGN KEY (size_id) REFERENCES product_sizes(id)
);
7. Архитектура приложения
7.1. Структура проекта
text
/root
├── /assets
│   ├── /css
│   ├── /js
│   └── /images
├── /includes
│   ├── config.php
│   ├── database.php
│   ├── auth.php
│   ├── cart.php
│   └── functions.php
├── /admin
│   ├── dashboard.php
│   ├── products.php
│   └── users.php
├── /api (AJAX endpoints)
├── index.php
├── catalog.php
├── product.php
├── cart.php
├── checkout.php
├── login.php
├── register.php
├── profile.php
└── orders.php
8. Требования к интерфейсу
8.1. Основные страницы
Главная страница - каталог товаров, популярные товары

Страница товара - детальная информация, выбор размера, добавление в корзину

Корзина - список выбранных товаров, изменение количества, оформление заказа

Оформление заказа - форма с адресом доставки и способом оплаты

Личный кабинет - профиль, история заказов

Панель администратора - управление товарами и пользователями

8.2. UI/UX требования
Четкая навигация

Интуитивно понятный интерфейс

Подтверждение важных действий

Информативные сообщения об ошибках

Индикаторы загрузки

9. Алгоритм слияния корзин
text
1. Пользователь добавляет товары в локальную корзину (неавторизован)
2. Пользователь авторизуется/регистрируется
3. Система проверяет наличие локальной корзины
4. Если локальная корзина существует:
   а. Получаем корзину пользователя из БД
   б. Для каждого товара в локальной корзине:
      - Проверяем наличие такого же товара и размера в корзине из БД
      - Если есть - суммируем количества
      - Если нет - добавляем новый элемент
   в. Очищаем локальную корзину
   г. Сохраняем обновленную корзину в БД
5. Если локальной корзины нет - используем корзину из БД
10. Критерии приемки
10.1. Обязательные функции
Работающая система авторизации/регистрации

4 уровня доступа с разными правами

Полнофункциональный каталог с фильтрами

Система корзины с сохранением для авторизованных пользователей

Автоматическое слияние корзин при авторизации

Панель управления для администратора и менеджера

Оформление заказов

Адаптивный дизайн

10.2. Тестирование
Проверка всех ролей пользователей

Тестирование процесса покупки

Проверка безопасности форм

Проверка слияния корзин

Тестирование на разных устройствах

11. Дополнительные требования
11.1. Логирование
Логирование действий администраторов

Логирование ошибок

Логирование покупок

11.2. Резервное копирование
Регулярное резервное копирование базы данных

Хранение резервных копий не менее 30 дней

Требования могут быть уточнены в процессе разработки по согласованию с преподавателем
(например, процедура регистрации может быть упрощена до эмуляции такой процедуры).